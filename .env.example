# ============================================
# 安全配置环境变量示例
# ============================================
# 复制此文件为 .env.local 并填入实际值
# ============================================

# 应用基础配置
NODE_ENV=production
PORT=5000

# ============================================
# 安全防护配置
# ============================================

# API 密钥（用于签名验证，请使用强随机字符串）
# 生成方法：node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SECURITY_API_KEY=your-super-secret-api-key-change-this-in-production

# 允许的域名白名单（逗号分隔）
# 支持精确匹配和通配符匹配（*.example.com）
ALLOWED_DOMAINS=your-domain.com,www.your-domain.com,*.vercel.app

# 时间戳有效期（秒）
# 用于防止重放攻击，建议 300 秒（5分钟）
TIMESTAMP_TOLERANCE=300

# 是否启用严格模式
# 生产环境建议设置为 true
SECURITY_STRICT_MODE=true

# ============================================
# IP 白名单配置（可选）
# ============================================

# 允许的 IP 地址（逗号分隔）
# 支持精确 IP 和 CIDR（如 192.168.1.0/24）
# 留空则允许所有 IP
ALLOWED_IPS=

# ============================================
# 支付二维码安全配置
# ============================================

# 微信收款码路径（相对于 public 目录）
PAYMENT_WECHAT_QRCODE=payment-wechat.png

# 支付宝收款码路径（相对于 public 目录）
PAYMENT_ALIPAY_QRCODE=payment-alipay.png

# 收款码混淆密钥（用于混淆收款码 URL）
PAYMENT_QRCODE_SECRET=another-secret-key-for-payment

# ============================================
# Coze 开发环境配置（可选）
# ============================================

# 是否为 Coze 开发环境
IS_COZE_ENV=false

# Coze 域名白名单（自动添加到允许域名列表）
COZE_DOMAINS=.coze.site,.dev.coze.site

# ============================================
# 调试配置（仅开发环境）
# ============================================

# 是否启用安全日志
SECURITY_DEBUG_LOG=false

# 是否禁用域名验证（仅用于调试）
SECURITY_SKIP_DOMAIN_CHECK=false

# ============================================
# 示例配置
# ============================================

# 开发环境配置示例：
# SECURITY_API_KEY=dev-secret-key-for-testing
# ALLOWED_DOMAINS=localhost:5000,localhost:3000,.coze.site
# SECURITY_STRICT_MODE=false
# SECURITY_DEBUG_LOG=true

# 生产环境配置示例：
# SECURITY_API_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0
# ALLOWED_DOMAINS=your-app.vercel.app,www.yourdomain.com,*.yourdomain.com
# SECURITY_STRICT_MODE=true
# SECURITY_DEBUG_LOG=false
